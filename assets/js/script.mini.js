for(var joueur=1,nbcolonnes=5,nblignes=5,jeu=!0,txt="",plateau=[],i=0;i<nblignes;i++)plateau[i]=[];function NewGame(){for(var e=0;e<nblignes;e++)for(var n=0;n<nbcolonnes;n++)plateau[e][n]=0;afficheTextAnnonce("Le jeu commence, c'est au tour du joueur "+nomDuJoueur(joueur=1)+"!"),jeu=!0,creerTableau()}function afficheTextAnnonce(e){document.getElementById("text-annonce").innerHTML=e}function nomDuJoueur(e){return 1==e?"rouge":"bleu"}function creerTableau(){txt="<table>";for(var e=0;e<nblignes;e++){txt+="<tr>";for(var n=0;n<nbcolonnes;n++)txt+="<td onclick='detecteclic("+n+")' id='"+e+"-"+n+"'>",1==plateau[e][n]?txt+="<div class='joueur1'></div>":2==plateau[e][n]&&(txt+="<div class='joueur2'></div>"),txt+="</td>";txt+="</tr>"}txt+="</table>",document.getElementById("puissance4").innerHTML=txt}function detecteclic(e){verifPosition(e)&&jeu&&(puissance4(poseJeton(e),e,0,0)?(jeu=!1,afficheTextAnnonce("Le joueur "+nomDuJoueur(this.joueur)+" a gagnÃ© la partie.")):afficheTextAnnonce("C'est au tour du joueur "+nomDuJoueur(joueur=1==joueur?2:1)))}function verifPosition(e){return 0==plateau[0][e]}function poseJeton(e){for(var n=nblignes-1;n>=0;n--)if(0==plateau[n][e])return plateau[n][e]=joueur,refreshTableau(n,e,joueur),n}function refreshTableau(e,n,u){document.getElementById(e+"-"+n).innerHTML="<div class='joueur"+u+"'></div>"}function puissance4(e,n,u,t){if(console.log("valeur:"+e+" "+n+" / increment "+u+" "+t),0==u&&0==t){var o=1+puissance4(e,n-1,0,-1)+puissance4(e,n+1,0,1),a=1+puissance4(e-1,n,-1,0)+puissance4(e+1,n,1,0),r=1+puissance4(e-1,n+1,-1,1)+puissance4(e+1,n-1,1,-1),i=1+puissance4(e-1,n-1,-1,-1)+puissance4(e+1,n+1,1,1);return o>=4||a>=4||r>=4||i>=4}return e<nblignes&&e>=0&&n<nbcolonnes&&n>=0&&plateau[e][n]==joueur?1+puissance4(e+u,n+t,u,t):0}NewGame();